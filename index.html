<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Catch the Fruit Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    * { box-sizing: border-box; }
    canvas { background: #e0f7fa; display: block; margin: 0 auto; border: 4px solid #0288d1; }
  </style>
</head>
<body class="bg-blue-50 min-h-screen flex flex-col items-center justify-start py-8">
  <h1 class="text-3xl font-bold text-blue-800 mb-4">Catch the Fruit 🍓🍌🍎</h1>
  <canvas id="gameCanvas" width="400" height="600"></canvas>
  <div class="mt-4 text-center">
    <button onclick="startGame()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Bắt đầu chơi</button>
    <p class="mt-2 text-lg">Điểm: <span id="score">0</span></p>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    const basket = { x: 160, y: 550, width: 80, height: 20 };
    const fruits = ["🍎", "🍌", "🍓", "🍒", "🍇"];
    let fallingFruits = [];
    let score = 0;
    let gameRunning = false;

    function drawBasket() {
      ctx.fillStyle = "#4caf50";
      ctx.fillRect(basket.x, basket.y, basket.width, basket.height);
    }

    function drawFruit(fruit) {
      ctx.font = "30px Arial";
      ctx.fillText(fruit.emoji, fruit.x, fruit.y);
    }

    function updateFruits() {
      for (let i = 0; i < fallingFruits.length; i++) {
        const fruit = fallingFruits[i];
        fruit.y += fruit.speed;

        // Check if caught
        if (
          fruit.y >= basket.y &&
          fruit.x > basket.x &&
          fruit.x < basket.x + basket.width
        ) {
          score++;
          fallingFruits.splice(i, 1);
          document.getElementById("score").innerText = score;
        } else if (fruit.y > canvas.height) {
          fallingFruits.splice(i, 1);
        }
      }
    }

    function spawnFruit() {
      const emoji = fruits[Math.floor(Math.random() * fruits.length)];
      const x = Math.random() * (canvas.width - 30);
      fallingFruits.push({ x, y: 0, emoji, speed: 2 + Math.random() * 2 });
    }

    function draw() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawBasket();
      fallingFruits.forEach(drawFruit);
      updateFruits();
      requestAnimationFrame(draw);
    }

    function startGame() {
      score = 0;
      fallingFruits = [];
      document.getElementById("score").innerText = score;
      gameRunning = true;
      setInterval(spawnFruit, 1000);
      draw();
    }

    document.addEventListener("mousemove", (e) => {
      const rect = canvas.getBoundingClientRect();
      basket.x = e.clientX - rect.left - basket.width / 2;
    });
  </script>
</body>
</html>
